title view stock card(s)

actor "API caller" as A

participant "Stock management service" as S

note right of A: 1. View SOH of stock cards (list view)

A->S: GET http:\/\/domain:port/api/stock-management/stock-cards?facility=xxx&program=yyy&soh_only=true

note left of S:Parameters:\n\nfacility must have\n\nprogram \n(must have or optional? would we ever need to query all stock cards of a facility? or is it always by program?)\n\nsoh_only optional

note left of S: if soh_only is false or not present, then the result will contain all details

S-->A: JSON

A->A: Display list of stock cards

note right of A: 2. View details of one stock card

opt option 1 load each stock card individually

A->S: GET http:\/\/domain:port/api/stock-management/configuration/optional-fields?facilityType=xxx&program=yyy

S-->A:JSON\n (indicating which field should be shown and which one should be hidden)

A->S: GET http:\/\/domain:port/api/stock-management/stock-card/[id]

S-->A:JSON

note left of S: There are different ways to do this:\n\n1.the way shown above\n\n2.Those two requests above could be made into one.\nWe can attach field configuration to stock card's JSON response.\nIt would reduce request amount, but also incur more data transfer for each stock card.\n\n3.back end omits fields that have been disabled. so the front end does not have to send the first request\n\nDiscussion needed here.

end

opt option 2 load all stock cards when displaying list

note right of A: details were loaded when displaying list
note left of S: in this case no request to service is needed

end

A->A: Display selected stock card